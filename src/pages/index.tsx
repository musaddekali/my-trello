import { FunctionComponent, useState } from "react";
import { Form, Input, Button, Checkbox } from "antd";
import Head from "next/head";
import { v4 as uuidv4 } from "uuid";

type Data = {
  id: string;
  text: string;
  isDone: boolean;
  isEdit: boolean;
};

export default function Home() {
  const [data, setData] = useState<Data[]>([]);
  const [form] = Form.useForm();

  const addData = (values: { text: string }) => {
    setData([
      ...data,
      {
        id: uuidv4(),
        ...values,
        isDone: false,
        isEdit: false,
      },
    ]);

    form.resetFields();
  };

  return (
    <>
      <Head>
        <title>Check List App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main>
        <div className="container">
          {/* Form  */}
          <div className="mt-5 w-1/2 mx-auto shadow p-4 rounded-md">
            <Form form={form} onFinish={addData} layout="vertical">
              <Form.Item
                rules={[{ required: true, message: "Please insert some text" }]}
                name="text"
                label="Add new item"
              >
                <Input size="large" placeholder="Add new item..." />
              </Form.Item>
              <Form.Item className="mb-0">
                <Button
                  size="large"
                  className="bg-blue-500 hover:bg-blue-600"
                  type="primary"
                  htmlType="submit"
                >
                  Add
                </Button>
              </Form.Item>
            </Form>
          </div>
          {/* End form  */}
          <div className="data_list mt-10">
            <CheckLists allData={data} />
          </div>
        </div>
      </main>
    </>
  );
}

const CheckLists = ({ allData }: any) => {
  return (
    <ul className="flex flex-col gap-3">
      {allData?.length > 0 ? (
        allData.map((item: Data) => {
          return <ListItem key={item.id} data={item} />;
        })
      ) : (
        <h4 className="p-4 bg-orange-500 text-white text-lg text-center rounded-md shadow-lg">
          No Data available
        </h4>
      )}
    </ul>
  );
};

const ListItem = ({ data }: any) => {
  const { id, text } = data;
  return (
    <li className="data_list_item p-4 rounded-md shadow">
      <div className="flex items-center gap-2">
        <Checkbox />
        <p>{text}</p>
      </div>
      <small>
        <strong>ID</strong>: {id}
      </small>
    </li>
  );
};
